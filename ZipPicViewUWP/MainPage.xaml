<Page
    x:Class="ZipPicViewUWP.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:behaviors="using:Microsoft.Toolkit.Uwp.UI.Animations.Behaviors"
    xmlns:controls="using:Microsoft.Toolkit.Uwp.UI.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:interactivity="using:Microsoft.Xaml.Interactivity"
    xmlns:local="using:ZipPicViewUWP"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    x:Name="page"
    KeyUp="PageKeyUp"
    Loaded="PageLoaded"
    SizeChanged="PageSizeChanged"
    mc:Ignorable="d">
    <Page.Resources>
        <Storyboard x:Name="ThumbnailBorderOpenStoryboard">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="ThumbnailBorder" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)">
                <SplineDoubleKeyFrame KeyTime="00:00:00" Value="-50" />
                <SplineDoubleKeyFrame KeyTime="00:00:00.5000000" Value="0" />
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="ThumbnailBorder" Storyboard.TargetProperty="(UIElement.Opacity)">
                <SplineDoubleKeyFrame KeyTime="00:00:00" Value="0" />
                <SplineDoubleKeyFrame KeyTime="00:00:00.5000000" Value="1" />
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
    </Page.Resources>
    <RelativePanel
        x:Name="displayPanel"
        AllowDrop="True"
        DragOver="DisplayPanelDragOver"
        Drop="DisplayPanelDrop">
        <Grid
            Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
            RelativePanel.AlignBottomWithPanel="True"
            RelativePanel.AlignLeftWithPanel="True"
            RelativePanel.AlignRightWithPanel="True"
            RelativePanel.AlignTopWithPanel="True">
            <Grid x:Name="printPanel" Opacity="0" />
            <SplitView
                x:Name="splitView"
                CompactPaneLength="50"
                DisplayMode="CompactOverlay"
                OpenPaneLength="300"
                PanePlacement="Left">
                <SplitView.Content>
                    <Grid>
                        <Border Name="ThumbnailBorder" RenderTransformOrigin="0.5,0.5">
                            <Border.RenderTransform>
                                <CompositeTransform />
                            </Border.RenderTransform>
                        </Border>
                    </Grid>
                </SplitView.Content>
                <SplitView.Pane>
                    <Grid Background="{StaticResource SidebarBackground}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="50" />
                            <RowDefinition Height="*" />
                            <RowDefinition Height="50" />
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0" Orientation="Horizontal">
                            <Button
                                x:Name="subFolderButton"
                                Width="50"
                                Height="50"
                                Background="Transparent"
                                Click="SubFolderButtonClick">
                                <SymbolIcon Symbol="List" />
                            </Button>
                            <TextBlock Margin="0,15" VerticalAlignment="Center">Folders</TextBlock>
                        </StackPanel>
                        <ScrollViewer Grid.Row="1">
                            <ListView
                                x:Name="subFolderListCtrl"
                                Margin="-10,0,0,0"
                                DataFetchSize="2"
                                SelectionChanged="SubFolderListSelectionChanged" />
                        </ScrollViewer>
                    </Grid>
                </SplitView.Pane>
            </SplitView>
        </Grid>
        <RelativePanel
            x:Name="viewerPanel"
            RelativePanel.AlignBottomWithPanel="True"
            RelativePanel.AlignLeftWithPanel="True"
            RelativePanel.AlignRightWithPanel="True"
            RelativePanel.AlignTopWithPanel="True"
            Visibility="Collapsed">
            <interactivity:Interaction.Behaviors>
                <behaviors:Fade
                    x:Name="ControlCloseBehavior"
                    AutomaticallyStart="True"
                    Delay="0"
                    EasingType="Linear"
                    Value="1.0"
                    Duration="100" />
            </interactivity:Interaction.Behaviors>

            <local:ViewerControl
                x:Name="imageControl"
                CloseButtonClick="ImageControlCloseButtonClick"
                RelativePanel.AlignBottomWithPanel="True"
                RelativePanel.AlignLeftWithPanel="True"
                RelativePanel.AlignRightWithPanel="True"
                RelativePanel.AlignTopWithPanel="True"
                Visibility="Collapsed" />
        </RelativePanel>
        <Grid
            RelativePanel.AlignBottomWithPanel="True"
            RelativePanel.AlignLeftWithPanel="True"
            RelativePanel.AlignRightWithPanel="True"
            RelativePanel.AlignTopWithPanel="True">
            <controls:InAppNotification x:Name="inAppNotification" />
        </Grid>
    </RelativePanel>
    <Page.TopAppBar>
        <CommandBar VerticalAlignment="Center" VerticalContentAlignment="Center">
            <CommandBar.Content>
                <TextBlock
                    x:Name="filenameTextBlock"
                    Margin="10,0,0,0"
                    Text="&lt;None&gt;"
                    UseLayoutRounding="True" />
            </CommandBar.Content>
            <AppBarToggleButton
                x:Name="fullscreenButton"
                Checked="FullscreenButton_Checked"
                Icon="FullScreen"
                Label="FullScreen"
                Unchecked="FullscreenButtonUnchecked" />
            <AppBarSeparator />
            <AppBarButton
                x:Name="openFileButton"
                Click="OpenFileButtonClick"
                Icon="OpenFile"
                Label="Open File" />
            <AppBarButton
                x:Name="openFolderButton"
                Click="OpenFolderButtonClick"
                Icon="Folder"
                Label="Open Folder" />
            <AppBarSeparator />
            <AppBarButton
                x:Name="aboutButton"
                Click="AboutButtonClick"
                Icon="Help"
                Label="About" />
        </CommandBar>
    </Page.TopAppBar>
</Page>